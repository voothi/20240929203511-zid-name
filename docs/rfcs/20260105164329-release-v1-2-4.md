# 20260105164329 Release v1.2.4

## Summary
Release v1.2.4 introduces advanced file extension handling and robust separator cleanup to the `zid-name` utility. It resolves issues with file types being stripped during renaming and ensures cleaner slugs by preventing double separators.

## Staging
`20260105164329`

## Implementation Details

### Analytics & Decisions

1.  **Extension Handling Strategy**:
    - **Problem**: Previously, `zid-name` stripped everything after dots if regex didn't allow them, or treated them as part of the name to be slugified. Users needed to preserve file extensions (e.g., `.mp4`, `.tar.gz`) for file renaming workflows.
    - **Decision**: Introduced `extension_nesting_level` configuration.
    - **Logic**:
        - `0` (default): Old behavior (extensions slugified or stripped).
        - `> 0`: Preserves up to N levels of extensions from the end of the string.
        - **Graceful Fallback**: If a file has fewer extensions than requested (e.g., `level=2` for `file.png`), it explicitly preserves what is available (`.png`) rather than failing or preserving nothing.

2.  **Smart Separator Logic**:
    - **Problem**: Users attempting to map `. ` to `-` via `config.ini` caused duplicate key errors (`.` key exists). Also, replacements could lead to `foo--bar`.
    - **Decision**: Implemented automatic post-processing.
        - **Deduplication**: Regex `separator+` -> `separator` (e.g., `--` -> `-`).
        - **Extension Filtering**: To distinguish "real" extensions from sentence endings (`foo. bar`), the logic explicitly ignores potential extensions that contain whitespace.

3.  **Configuration Safety**:
    - Removed the need for fragile `.` mapping in `config.ini` by handling it in code.
    - Added error logging to preventing silent failures if `config.ini` is malformed in the future.
