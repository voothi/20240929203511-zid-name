# RFC: Release v1.2.0 - Batch Processing and Smart Sanitization

**ZID**: 20260105124510
**Status**: Staging
**Request**: 20260105124510

## Goal Description
Implement batch processing for multi-line clipboard content, standardize ZID detection, and ensure smart preservation of document structure (headings and list markers).

## Implementation Details

### Analytics and Decisions
1. **Batch Mode Heuristic**: Initial plan to check for *any* ZID was refined into a "Smart Detection" system. Single-line inputs are always sanitized to support manual substring or heading-to-filename workflows. Multi-line blocks respect the new configuration flag to avoid accidental destruction of notes.
2. **Heading Support**: Markdown headings (`#` to `######`) are now treated as valid prefixes. Like list markers, they are preserved while the text following them is slugified. If a ZID is already present (e.g., `## 2026...`), it is handled correctly; if not, and `process_non_zid_lines` is true, a new ZID is generated.
3. **Prefix Preservation**: Standardized the ZID regex to recognize indentation, Bullets (`-`, `*`), Numbers (`1.`), Checkboxes (`[ ]`, `[x]`), and Markdown Headings. This preservation exists for both ZID-present and non-ZID lines in batch mode.
4. **Sanitization Logic**: Added a trailing separator strip step to handle strings containing trailing punctuation or spaces that resulted in dangling hyphens.

## Changes
- `zid_name.py`: Refactored `process_string` and `process_line` for batch support and heading prefixes.
- `config.ini`: Added `process_non_zid_lines` setting (default False).
- `obsidian_zid_wikilink.py`: Synchronized logic with root, adding wikilink-specific batch processing.
- `tests/`: Added and updated 12 new test cases across both projects.

## Verification
- Automated tests: 24/24 pass (13 in root, 11 in ref).
- Manual verification: Confirmed `# 2026... Title` -> `# 2026...-title`.

---
Created on: 2026-01-05
